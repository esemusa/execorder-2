<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>>Trump Executive Order Generator 2.0</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.min.js"></script>
    <script src="lib/rollups/aes.js"></script>
    <script src="lib/clipboard.js-master/dist/clipboard.min.js"></script>
    <style>
        .eo {
            transform: skewY(7deg) skewX(0deg) rotateY(3deg) rotateX(3deg) rotateZ(0.6deg);
            position: absolute;
            left: 380px;
            top: 290px;
            width: 215px;
            height: 240px;
            text-shadow: 0 0 1px black;
            color: transparent;
            font-family: monospace;
        }
    </style>
</head>
<body onload="decrypt()" style='perspective: 400px;'>

<div style='margin: 30px; position: absolute; left: 0; top: 0px; z-index: 50;'>
    <img src='index.jpg'/>
    <div class='eo' id='eo' contenteditable onkeyup='keyUp(event);' style='font-size: 17px;' spellcheck='false'>
        Click me. Edit me. Make me horrifying.


        Type '&lt;' and '&gt;' to change the text size.
    </div>
</div>
<div style="position: absolute; top: 830px; margin: 30px">
    <label for="myInput">Share-Link:</label>
    <input id="myInput" type="text" style="width: 570px">
</div>



<script>
    function decrypt() {
        var url = window.location.href;
        console.log(url.substring(url.indexOf('?')+1, url.length));
        var decrypted = CryptoJS.AES.decrypt(url.substring(url.indexOf('?')+1, url.length), "test");
        if (decrypted != "") {
            document.getElementById("eo").innerHTML = decrypted.toString(CryptoJS.enc.Utf8);
        }
    }

    function encrypt(value) {
        var encrypted = CryptoJS.AES.encrypt(value, "test");
        //console.log(encrypted);
        document.getElementById("myInput").value = window.location.href +'?'+encrypted;
    }


    function keyUp(e) {
        var eo = document.getElementById('eo');
        var input = eo.innerHTML;
        //console.log(input);
        encrypt(input);
        var key = e.keyCode;
        if (key != 60 && key != 62) return;
        var adj = (key == 60) ? -1 : +1;
        var size = parseInt(eo.style['font-size']);
        eo.style['font-size'] = (size + adj) + 'px';
        e.preventDefault();
    }

</script>
</body>
</html>